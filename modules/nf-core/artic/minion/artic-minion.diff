Changes in component 'nf-core/artic/minion'
'modules/nf-core/artic/minion/meta.yml' is unchanged
Changes in 'artic/minion/main.nf':
--- modules/nf-core/artic/minion/main.nf
+++ modules/nf-core/artic/minion/main.nf
@@ -4,13 +4,19 @@
 
     conda "${moduleDir}/environment.yml"
     container "${ workflow.containerEngine == 'singularity' && !task.ext.singularity_pull_docker_container ?
-        'https://depot.galaxyproject.org/singularity/artic:1.6.1--pyhdfd78af_0' :
-        'biocontainers/artic:1.6.1--pyhdfd78af_0' }"
+        'https://depot.galaxyproject.org/singularity/artic:1.2.3--pyhdfd78af_0' :
+        'quay.io/biocontainers/artic:1.2.3--pyhdfd78af_0' }"
 
     input:
     tuple val(meta), path(fastq)
-    tuple val(meta2), path(model_dir), val(model)
-    tuple val(meta3), path(fasta), path(bed)
+    path  fast5_dir
+    path  sequencing_summary
+    path  ("primer-schemes/${scheme}/V${scheme_version}/${scheme}.reference.fasta")
+    path  ("primer-schemes/${scheme}/V${scheme_version}/${scheme}.scheme.bed")
+    path  medaka_model_file
+    val   medaka_model_string
+    val   scheme
+    val   scheme_version
 
     output:
     tuple val(meta), path("${prefix}.*")                              , emit: results
@@ -32,7 +38,15 @@
     script:
     def args = task.ext.args   ?: ''
     prefix   = task.ext.prefix ?: "${meta.id}"
-    def model_dir_cmd   = model_dir   ? "--model-dir $model_dir" : "--model-dir \$(which artic | sed 's/artic/models/')"
+    def version  = scheme_version.toString().toLowerCase().replaceAll('v','')
+    def fast5    = fast5_dir ? "--fast5-directory $fast5_dir"             : ""
+    def summary  = sequencing_summary ? "--sequencing-summary $sequencing_summary" : ""
+    def model    = ""
+    if (args.tokenize().contains('--medaka')) {
+        fast5   = ""
+        summary = ""
+        model   = medaka_model_file ? "--medaka-model ./$medaka_model_file" : "--medaka-model $medaka_model_string"
+    }
     def hd5_plugin_path = task.ext.hd5_plugin_path ? "export HDF5_PLUGIN_PATH=" + task.ext.hd5_plugin_path : "export HDF5_PLUGIN_PATH=/usr/local/lib/python3.6/site-packages/ont_fast5_api/vbz_plugin"
     """
     $hd5_plugin_path
@@ -42,10 +56,12 @@
         $args \\
         --threads $task.cpus \\
         --read-file $fastq \\
-        --bed $bed \\
-        --ref $fasta \\
-        $model_dir_cmd \\
-        --model $model \\
+        --scheme-directory ./primer-schemes \\
+        --scheme-version $version \\
+        $model \\
+        $fast5 \\
+        $summary \\
+        $scheme \\
         $prefix
 
     cat <<-END_VERSIONS > versions.yml

'modules/nf-core/artic/minion/environment.yml' is unchanged
'modules/nf-core/artic/minion/tests/main.nf.test' is unchanged
'modules/nf-core/artic/minion/tests/main.nf.test.snap' is unchanged
************************************************************
